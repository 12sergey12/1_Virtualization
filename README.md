### Домашнее задание к занятию 1. «Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения» Баранов Сергей


---


### Задача 1

### Опишите кратко, в чём основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

- Аппаратная (полная) виртуализация - полная эмуляция процессора, памяти и необходимых периферийных устройств, обеспечение тотальную изоляцию гостевой ОС, из-за чего большие накладные расходы, что может выливаться в уменьшение производительности. Однако данные проблемы решаются реализацией аппаратной виртуализации Intel-VT, AMD-V.
- Паравиртуализация - в том числе эмуляция работы устройств, однако гостевая ОС знает о наличии гипервизора, а выполнения привилегированных инструкций происходит через гипервизор, поэтому происходит серьезное изменение ядра гостевой ОС. В силу данной особенности подходит для ОС с открытым кодом, издержки меньше, производительность не особо страдает. В отличие от полной виртуализации в данной технологии допускается прямое использование гостевой ОС аппаратных ресурсов хоста.
- Виртуализация на основе ОС - еще называется контейнеризация, возможно выделять новые пространства имен, ограничивать ресурсы хостовой машины, тем самым создавать изолированные контейнеры, в которых будут выполняться процессы. Ядро гостевой ОС не может отличаться от ядра хостовой ОС.


---


### Задача 2

### Выберите один из вариантов использования организации физических серверов в зависимости от условий использования.

### Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- высоконагруженная база данных, чувствительная к отказу: 
для размещения может использоваться как физический сервер (т.к. виртуализация снижает производительность) так и оптимизированная паравиртуализированная инфраструктура обеспечивающая преимущества виртуализации (кластеризация) ценой увеличения мощности и соответственно стоимости аппаратных ресурсов.  По моему мнению необходимо запаковать это в контейнер, создать несколько контейнеров, тем самым получить отказоустойчивый кластер, управление контейнером сводится к управлению процессом - быстро и без накладных расходов.
- различные web-приложения:
в данном случае лучше всего подойдёт виртуализация уровня ОС, которая даёт преимущества при разработке, тестировании и размещения приложений, если приложения могут работать на том же ядре, что и ядро хостовой ОС. Если, все же есть ограничения, тогда паравиртуализация. Так как это web - приложения, следовательно, будет много обращений к ним, как к сервису, поэтому в первую очередь необходимо обеспечить хорошую производительность и снизить накладные расходы. 
- Windows-системы для использования бухгалтерским отделом:
паравиртуализация по большей части, не требуют супер производительности и количество обращений более менее прогнозируемое.
- системы, выполняющие высокопроизводительные расчеты на GPU: 
физические сервера т.к. виртуализация может негативно влиять на эффективность использования вычислительных ресурсов. Также существуют специализированные решения паравиртуализации оптимизированные для применения в данной области.


---


### Задача 3

### Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
- VMWare. В рамках продуктов виртуализации и управления, решения от VMWare являются наиболее сбалансированными, имеют достаточно обширный функционал, который позволит закрыть вопросы по сопровождению и администрированию среды на 100 VM Windows, Linux. 
- Hyper-V, ESXi, KVM, Xen. Все задачи легко реализуемы на этих гипервизорах. Конкретный выбор будет за человеком которому предстоит все это администрировать.

2. Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
- Xen единственные кто подходят по требованиям.
- KVM. Решение на базе KVM позволит управлять гостевыми ОС, как Windows, так и Linux, без особых потерь в производительности, что обеспечивает решение поставленной задачи. 

3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.
- XEN. Решение позволит поднять инфраструктуру на базе Windows OS, является open source проектом, обеспечит высокую производительность.
- ESXi, так как он бесплатный и с красивым интерфейсом, а при Hyper-V необходимо покупать лицензию ОС так еще и есть зависимость стоимости от количества виртуальных машин.

4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
- Наибольшую скорость развертывания в данном случае могут обеспечить решения виртуализации уровне ОС по типу Docker.
- Virtualbox совместно с Vagrant возможно добиться автоматизации сборки такого окружения, при помощи Vagrantfile отдавать данное окружения всем, кто заинтересован, это позволит точно быть уверенным в единой среде..


---


### Задача 4

### Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

Выбор среды виртуализации делается на основании анализа, рассматривается детальное описание требований к будущей реализации, если мы можем на начальном этапе избежать гетерогенной среды из продуктов и решений, то ни к чему вводить два или более решений по управлению виртуальной средой. Однако, если же этого не избежать, специфика поставленной задачи такова, что гетерогенная среда будет оправдана, и с точки зрения затрат, и с точки зрения управления, то тогда необходимо внедрять такое решение, но придется учитывать особенности - две или более точки управления виртуальными средами, потянет за собой и необходимость привлекать более квалифицированный персонал, объем выполняемых работ увеличится, потребуется разработка автоматизационных решений под обе среды. В том числе значительно усложняется вопрос по реализации процесса управления изменениями, то есть изменения, которые будут доставляться в одну среду, могут отличаться от способа и метода доставки в другой среде. Создание гетерогенной среды зависит от задач которые стоят перед компанией и размеров самой компании. Разделение имеет смысл при большой компании, где есть что разделять. В небольшой компании какой то одной среды будет достаточно. По моему личному мнению, гетерогенная среда виртуализации - требует определенного баланса между необходимым и достаточным. Не стоит боятся использования, необходимо ответственно подходить к архитектуре решения.

